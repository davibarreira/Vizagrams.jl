<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Histogram · Vizagrams.jl</title><meta name="title" content="Histogram · Vizagrams.jl"/><meta property="og:title" content="Histogram · Vizagrams.jl"/><meta property="twitter:title" content="Histogram · Vizagrams.jl"/><meta name="description" content="Documentation for Vizagrams.jl."/><meta property="og:description" content="Documentation for Vizagrams.jl."/><meta property="twitter:description" content="Documentation for Vizagrams.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.svg" alt="Vizagrams.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Vizagrams.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../../tutorials/1_basics/">1 - Diagramming Basics</a></li><li><a class="tocitem" href="../../tutorials/2_custommarks/">2 - Custom Marks</a></li><li><a class="tocitem" href="../../tutorials/3_datavisualization/">3 - Data Vizualization Basics</a></li><li><a class="tocitem" href="../../tutorials/4_expressiveness/">4 - Graphic Expressions</a></li><li><a class="tocitem" href="../../tutorials/5_customization/">5 - Customizing Visualizations</a></li><li><a class="tocitem" href="../../tutorials/6_polar/">6 - Polar Visualizations</a></li><li><a class="tocitem" href="../../tutorials/7_composite/">7 - Composite Visualizations</a></li></ul></li><li><span class="tocitem">Gallery</span><ul><li><a class="tocitem" href="../boxplot/">BoxPlot</a></li><li><a class="tocitem" href="../groupedbar/">Grouped Bar Chart</a></li><li class="is-active"><a class="tocitem" href>Histogram</a><ul class="internal"><li><a class="tocitem" href="#1.-Creating-a-Histogram-Quickly"><span>1. Creating a Histogram Quickly</span></a></li><li><a class="tocitem" href="#2.-Histogram-Graphic-Expression"><span>2. Histogram Graphic Expression</span></a></li><li><a class="tocitem" href="#3.-Computing-the-Histogram-Manually"><span>3. Computing the Histogram Manually</span></a></li></ul></li><li><a class="tocitem" href="../minard/">Minard&#39;s Chart</a></li><li><a class="tocitem" href="../moritz/">OECD Better Life Index</a></li><li><a class="tocitem" href="../pca/">PCA</a></li><li><a class="tocitem" href="../penguins/">Penguins</a></li><li><a class="tocitem" href="../nightingale/">Rose Diagram</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Gallery</a></li><li class="is-active"><a href>Histogram</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Histogram</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/davibarreira/Vizagrams.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/davibarreira/Vizagrams.jl/blob/master/docs/src/gallery/histogram.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Histogram"><a class="docs-heading-anchor" href="#Histogram">Histogram</a><a id="Histogram-1"></a><a class="docs-heading-anchor-permalink" href="#Histogram" title="Permalink"></a></h1><p>A histogram is simply a bar plot. We only need to precompute some characteristics such as the bins and the amount in each bin. Vizagrams already has some helper functions to compute bins as well as a histogram mark <code>Hist</code>. Let us start by producing a histogram using the presets in Vizagrams, and then we show how to do it all manually.</p><h2 id="1.-Creating-a-Histogram-Quickly"><a class="docs-heading-anchor" href="#1.-Creating-a-Histogram-Quickly">1. Creating a Histogram Quickly</a><a id="1.-Creating-a-Histogram-Quickly-1"></a><a class="docs-heading-anchor-permalink" href="#1.-Creating-a-Histogram-Quickly" title="Permalink"></a></h2><p>Here is the quickest way of creating a histogram. We use the functions <code>bindata</code> that bins the data, and <code>countbin</code> which returns the weights for the bins for each value. We then use the <code>Hist()</code> mark.</p><pre><code class="language-julia hljs">using Vizagrams
using Random
using StatsBase
using StructArrays

Random.seed!(4)
data = StructArray(x=rand(100),)
hist = Plot(
    data=data,
    x=bindata(data.x),
    y=countbin(data.x),
    graphic=Hist()
)

draw(hist)</code></pre><img src="d37630f9.svg" alt="Example block output"/><p>We can also add some text on top of each bar:</p><pre><code class="language-julia hljs">hist = Plot(
    data=data,
    x=bindata(data.x),
    y=countbin(data.x),
    h=(value=countbin(data.x),scale=IdScale()),
    graphic= Hist() + ∑(i=:x) do row
        T(row.x[1],row.y[1]+10)TextMark(text=row.h[1],fontsize=8)
    end
)

draw(hist)</code></pre><img src="331f11c9.svg" alt="Example block output"/><h2 id="2.-Histogram-Graphic-Expression"><a class="docs-heading-anchor" href="#2.-Histogram-Graphic-Expression">2. Histogram Graphic Expression</a><a id="2.-Histogram-Graphic-Expression-1"></a><a class="docs-heading-anchor-permalink" href="#2.-Histogram-Graphic-Expression" title="Permalink"></a></h2><p>Let us now show how we can draw the histogram using only bars.</p><pre><code class="language-julia hljs">hist = Plot(
    data = data,
    config=(;
        grid=NilD(),
        xaxis=(;title=&quot;Histogram&quot;),
        yaxis=(;title=&quot;Count&quot;),
    ),
    encodings=(
        x=(value=bindata(data.x,nbins=5),),
        y=(value=countbin(data.x,nbins=5),datatype=:q),
    ),
    graphic = data-&gt; begin

        # compute the bin width
        w = let
            u = sort(unique(data.x))
            u[2]-u[1]-1
        end

        # draw each bar
        ∑(i=:x) do row
                S(:fillOpacity=&gt;0.9,:fill=&gt;:steelblue)*
                T(row.x[1],0)Bar(w=w,h=row.y[1],orientation=:v)
        end(data)
    end
)

draw(hist)</code></pre><img src="afe39f7d.svg" alt="Example block output"/><h2 id="3.-Computing-the-Histogram-Manually"><a class="docs-heading-anchor" href="#3.-Computing-the-Histogram-Manually">3. Computing the Histogram Manually</a><a id="3.-Computing-the-Histogram-Manually-1"></a><a class="docs-heading-anchor-permalink" href="#3.-Computing-the-Histogram-Manually" title="Permalink"></a></h2><p>Next, let us compute the histogram bins manually and draw them.</p><pre><code class="language-julia hljs">Random.seed!(4)
# Create a histogram
h = fit(Histogram, rand(100), nbins=10)

# Get the edges of the bins
edges = h.edges[1]

# Compute the centers of the bins
bin_centers = (edges[1:end-1] .+ edges[2:end]) ./ 2

data = StructArray(x=bin_centers, h=h.weights)

hist = Plot(
    data = data,
    config=(;xaxis=(;tickvalues=collect(h.edges[1])),),
    encodings=(
        x=(field=:x,datatype=:q,guide=(tickvalues=collect(h.edges[1]),)),
        y=(field=:h,datatype=:q),
    ),
    graphic = data-&gt;begin
        bar_width = (data.x[2] - data.x[1])*0.95
        ∑() do row
            T(row[:x],0)*
            S(:fillOpacity=&gt;0.9,:fill=&gt;:steelblue)*
            Bar(w=bar_width,h=row[:y])
        end(data)
    end
)

draw(hist)</code></pre><img src="1e2e1f39.svg" alt="Example block output"/><p>The benefit of having the complete specification is that we can modify it in order to customize our visualization. For example, we can remove the y-axis and add the values above the bars.</p><pre><code class="language-julia hljs">hist2 = Plot(
    config =(
        frame=NilD(),
        yaxis=NilD(),
        grid=NilD(),
    ),
    data = data,
    encodings=(
        x=(field=:x,datatype=:q),
        y=(field=:h,datatype=:q),
        h=(field=:h,datatype=:q,scale=IdScale(),),
    ),
    graphic = sdata-&gt;begin
        w = (sdata.x[2] - sdata.x[1])*0.95
        ∑() do row
            T(row[:x],0)*
            S(:fillOpacity=&gt;0.9,:fill=&gt;:steelblue)*
            (
                Bar(w=w,h=row[:y]) ↑
                (T(0,4),TextMark(fontsize=14,text=row[:h]))
            )
        end(sdata)
    end
)

draw(hist2)</code></pre><img src="a91b5344.svg" alt="Example block output"/></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../groupedbar/">« Grouped Bar Chart</a><a class="docs-footer-nextpage" href="../minard/">Minard&#39;s Chart »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.7.0 on <span class="colophon-date" title="Thursday 26 September 2024 17:51">Thursday 26 September 2024</span>. Using Julia version 1.10.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
