<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Penguins · Vizagrams.jl</title><meta name="title" content="Penguins · Vizagrams.jl"/><meta property="og:title" content="Penguins · Vizagrams.jl"/><meta property="twitter:title" content="Penguins · Vizagrams.jl"/><meta name="description" content="Documentation for Vizagrams.jl."/><meta property="og:description" content="Documentation for Vizagrams.jl."/><meta property="twitter:description" content="Documentation for Vizagrams.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.svg" alt="Vizagrams.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Vizagrams.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../../tutorials/1_basics/">1 - Diagramming Basics</a></li><li><a class="tocitem" href="../../tutorials/2_custommarks/">2 - Custom Marks</a></li><li><a class="tocitem" href="../../tutorials/3_datavisualization/">3 - Data Vizualization Basics</a></li><li><a class="tocitem" href="../../tutorials/4_expressiveness/">4 - Graphic Expressions</a></li><li><a class="tocitem" href="../../tutorials/5_customization/">5 - Customizing Visualizations</a></li><li><a class="tocitem" href="../../tutorials/6_polar/">6 - Polar Visualizations</a></li><li><a class="tocitem" href="../../tutorials/7_composite/">7 - Composite Visualizations</a></li></ul></li><li><span class="tocitem">Gallery</span><ul><li><a class="tocitem" href="../boxplot/">BoxPlot</a></li><li><a class="tocitem" href="../groupedbar/">Grouped Bar Chart</a></li><li><a class="tocitem" href="../histogram/">Histogram</a></li><li><a class="tocitem" href="../minard/">Minard&#39;s Chart</a></li><li><a class="tocitem" href="../moritz/">OECD Better Life Index</a></li><li><a class="tocitem" href="../pca/">PCA</a></li><li class="is-active"><a class="tocitem" href>Penguins</a><ul class="internal"><li><a class="tocitem" href="#1.-Creating-our-Penguin-Mark"><span>1. Creating our Penguin Mark</span></a></li><li><a class="tocitem" href="#2.-A-Simple-Plot"><span>2. A Simple Plot</span></a></li><li><a class="tocitem" href="#3.-More-Complex-Example"><span>3. More Complex Example</span></a></li></ul></li><li><a class="tocitem" href="../nightingale/">Rose Diagram</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Gallery</a></li><li class="is-active"><a href>Penguins</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Penguins</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/davibarreira/Vizagrams.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/davibarreira/Vizagrams.jl/blob/master/docs/src/gallery/penguins.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Penguins-Plot"><a class="docs-heading-anchor" href="#Penguins-Plot">Penguins Plot</a><a id="Penguins-Plot-1"></a><a class="docs-heading-anchor-permalink" href="#Penguins-Plot" title="Permalink"></a></h1><p>Let us explore how customized marks can be used in data visualization within Vizagrams. For this, we will use the famous Palmer Penguins dataset.</p><pre><code class="language-julia hljs">using Vizagrams
using PalmerPenguins
using DataFrames
using Statistics

df = DataFrame(PalmerPenguins.load())
df = dropmissing(df);</code></pre><h2 id="1.-Creating-our-Penguin-Mark"><a class="docs-heading-anchor" href="#1.-Creating-our-Penguin-Mark">1. Creating our Penguin Mark</a><a id="1.-Creating-our-Penguin-Mark-1"></a><a class="docs-heading-anchor-permalink" href="#1.-Creating-our-Penguin-Mark" title="Permalink"></a></h2><p>First, we create a penguin mark.</p><pre><code class="language-julia hljs">struct PenguinBill &lt;: Mark
    bill_length::Real
    bill_depth::Real
end
PenguinBill(;bill_length=40, bill_depth=20) = PenguinBill(bill_length, bill_depth)

function Vizagrams.ζ(p::PenguinBill)::TMark
    (;bill_depth, bill_length) = p
    bill = R(-π/2)U(1/30)Polygon([[-bill_depth,0],[0,bill_length],[bill_depth,0]])
    bill = S(:fill=&gt;:orange)T(0.5,0)*bill
    splash = T(-0.2,0)*QBezierPolygon([[0.2,0],[1,0]],[[1.,1],[0.5,-1]])
    splash = R(π/4)T(-0.1,0.1)S(:fill=&gt;:white)*splash
    eye = T(0.3,0.3)S(:fill=&gt;:orange)Circle(r=0.1) + T(0.3,0.3)Circle(r=0.05)
    return bill + Circle() + splash + eye
end

draw(PenguinBill(),height=200)</code></pre><svg height="200" viewBox="-1.05 -1.05 2.933333333333333 2.1" width="283.3333333333333" preserveAspectRatio="xMidYMid meet"><polygon points="0.49999999999999994 0.6666666666666666 1.8333333333333333 8.164311994315688e-17 0.5 -0.6666666666666666 " style="vector-effect: non-scaling-stroke; fill: orange; " transform="scale(1,-1)" /><circle cy="0" style="vector-effect: non-scaling-stroke; " r="1" transform="scale(1,-1)" cx="0" /><path style="vector-effect: non-scaling-stroke; fill: white; " transform="scale(1,-1)" d="M-0.14142135623730948 0.0 Q -0.2828427124746189 1.2727922061357855 0.42426406871192857 0.565685424949238 0.7778174593052022 -0.49497474683058335 -0.14142135623730948 0.0  Z" /><circle cy="0.3" style="vector-effect: non-scaling-stroke; fill: orange; " r="0.10000000000000002" transform="scale(1,-1)" cx="0.3" /><circle cy="0.3" style="vector-effect: non-scaling-stroke; " r="0.04999999999999999" transform="scale(1,-1)" cx="0.3" /></svg><h2 id="2.-A-Simple-Plot"><a class="docs-heading-anchor" href="#2.-A-Simple-Plot">2. A Simple Plot</a><a id="2.-A-Simple-Plot-1"></a><a class="docs-heading-anchor-permalink" href="#2.-A-Simple-Plot" title="Permalink"></a></h2><p>We start with a simple plot:</p><pre><code class="language-julia hljs">plt = plot(df,x=:island,y=:species,graphic = PenguinBill())
draw(plt)</code></pre><img src="4c7b249a.svg" alt="Example block output"/><p>The mark is too small and has transparency. Let us fix it:</p><pre><code class="language-julia hljs">plt = plot(df;
    x=:island,
    y=:species,
    graphic=Mark(
        U(20)S(:opacity =&gt; 1)PenguinBill())
)
draw(plt)</code></pre><img src="e51b0755.svg" alt="Example block output"/><p>This plot is not making use of the parameters specified in the penguin mark. Let us use them:</p><pre><code class="language-julia hljs">plt = plot(df,
    x=:island,
    y=:species,
    color=:species,
    bill_length= (field=:bill_length_mm,scale=IdScale()),
    bill_depth= (field=:bill_depth_mm,scale=IdScale()),
    graphic= ∑(i=:x, ∑(i=:y) do row
        T(row.x[1],row.y[1])U(20)*
        S(:fill=&gt;row.color[1])*
        PenguinBill(
            bill_length=median(row.bill_length),
            bill_depth=median(row.bill_depth)
        )
    end)
)
draw(plt)</code></pre><img src="61b3aacb.svg" alt="Example block output"/><h2 id="3.-More-Complex-Example"><a class="docs-heading-anchor" href="#3.-More-Complex-Example">3. More Complex Example</a><a id="3.-More-Complex-Example-1"></a><a class="docs-heading-anchor-permalink" href="#3.-More-Complex-Example" title="Permalink"></a></h2><p>Our previous plot compared penguins in terms of bill length and depth for different species in different islands. We can modify the specification in order to also compare penguins in terms of <code>sex</code>.</p><pre><code class="language-julia hljs">plt = plot(df,
    x=:island,
    y=:species,
    sex=(field=:sex,scale=IdScale()),
    color=:species,
    bill_length= (field=:bill_length_mm,scale_range=[10,100],),
    bill_depth= (field=:bill_depth_mm,scale_range=[10,30]),

    graphic= ∑(i=:x, ∑(i=:y,orderby=:sex, descend=true, ∑(i=:sex,op=↑) do row
                T(0,-10)*
                T(row.x[1],row.y[1])U(10)*
                S(:fill=&gt;row.color[1])*
                (
                    PenguinBill(bill_length=median(row.bill_length),bill_depth=median(row.bill_depth))
                    ←
                    (T(-0.5,0),S(:fill=&gt;:grey)TextMark(text=row.sex[1],fontsize=0.7,fontfamily=&quot;monospace&quot;))
                )
    end
    ))
)
draw(plt,height=500)</code></pre><img src="8f32d9d0.svg" alt="Example block output"/></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../pca/">« PCA</a><a class="docs-footer-nextpage" href="../nightingale/">Rose Diagram »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.7.0 on <span class="colophon-date" title="Thursday 26 September 2024 00:58">Thursday 26 September 2024</span>. Using Julia version 1.10.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
