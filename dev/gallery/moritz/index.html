<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>OECD Better Life Index · Vizagrams.jl</title><meta name="title" content="OECD Better Life Index · Vizagrams.jl"/><meta property="og:title" content="OECD Better Life Index · Vizagrams.jl"/><meta property="twitter:title" content="OECD Better Life Index · Vizagrams.jl"/><meta name="description" content="Documentation for Vizagrams.jl."/><meta property="og:description" content="Documentation for Vizagrams.jl."/><meta property="twitter:description" content="Documentation for Vizagrams.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.svg" alt="Vizagrams.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Vizagrams.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../../tutorials/1_basics/">1 - Diagramming Basics</a></li><li><a class="tocitem" href="../../tutorials/2_custommarks/">2 - Custom Marks</a></li><li><a class="tocitem" href="../../tutorials/3_datavisualization/">3 - Data Vizualization Basics</a></li><li><a class="tocitem" href="../../tutorials/4_expressiveness/">4 - Graphic Expressions</a></li><li><a class="tocitem" href="../../tutorials/5_customization/">5 - Customizing Visualizations</a></li><li><a class="tocitem" href="../../tutorials/6_polar/">6 - Polar Visualizations</a></li><li><a class="tocitem" href="../../tutorials/7_composite/">7 - Composite Visualizations</a></li></ul></li><li><span class="tocitem">Gallery</span><ul><li><a class="tocitem" href="../boxplot/">BoxPlot</a></li><li><a class="tocitem" href="../groupedbar/">Grouped Bar Chart</a></li><li><a class="tocitem" href="../histogram/">Histogram</a></li><li><a class="tocitem" href="../minard/">Minard&#39;s Chart</a></li><li class="is-active"><a class="tocitem" href>OECD Better Life Index</a><ul class="internal"><li><a class="tocitem" href="#1.-Creating-Petal"><span>1. Creating Petal</span></a></li><li><a class="tocitem" href="#2.-Creating-Flower"><span>2. Creating Flower</span></a></li><li><a class="tocitem" href="#3.-Creating-Stem"><span>3. Creating Stem</span></a></li><li><a class="tocitem" href="#4.-Creating-Plant"><span>4. Creating Plant</span></a></li><li><a class="tocitem" href="#5.-Making-the-Plot"><span>5. Making the Plot</span></a></li></ul></li><li><a class="tocitem" href="../pca/">PCA</a></li><li><a class="tocitem" href="../penguins/">Penguins</a></li><li><a class="tocitem" href="../nightingale/">Rose Diagram</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Gallery</a></li><li class="is-active"><a href>OECD Better Life Index</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>OECD Better Life Index</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/davibarreira/Vizagrams.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/davibarreira/Vizagrams.jl/blob/master/docs/src/gallery/moritz.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Replicating-OECD-Better-Life-Visualization"><a class="docs-heading-anchor" href="#Replicating-OECD-Better-Life-Visualization">Replicating OECD Better Life Visualization</a><a id="Replicating-OECD-Better-Life-Visualization-1"></a><a class="docs-heading-anchor-permalink" href="#Replicating-OECD-Better-Life-Visualization" title="Permalink"></a></h1><p>In this notebook, we show how Vizagrams can be use to produce the <a href="https://www.oecdbetterlifeindex.org">OECD Better Life visualization</a>.</p><h2 id="1.-Creating-Petal"><a class="docs-heading-anchor" href="#1.-Creating-Petal">1. Creating Petal</a><a id="1.-Creating-Petal-1"></a><a class="docs-heading-anchor-permalink" href="#1.-Creating-Petal" title="Permalink"></a></h2><p>We start by creating the Petal mark.</p><pre><code class="language-julia hljs">using Vizagrams
import Vizagrams: ζ, θ;

using DataFrames
using CSV
using ColorSchemes
using Colors
using Statistics
import Random

# Creating a colorscheme
rainbow_12 = ColorScheme(colourschemes[:rainbow][reverse(vcat(1:2:17,2,8,14))]);

struct Petal &lt;: Mark
    height::Real
    width::Real
    color::String
end

# Default Petal
Petal(;height=1, width=0.5, color=&quot;steelblue&quot;) = Petal(height, width,color)

function θ(p::Petal)
    (;height, width, color) = p
    return η([
                Prim(CBezierPolygon(
                    [[0,0],[0,height],[0,0]],
                    [[-width,height*0.8],[0,height],[0,height],[width,height*0.8],[0,0],[0,0]]),
                S(:fill=&gt;color, :strokeWidth=&gt;0))
            ])
end
draw(Petal())</code></pre><svg height="300" viewBox="-0.23888888888888887 -1.0166666666666666 0.47777777777777775 1.0333333333333334" width="133.33333333333331" preserveAspectRatio="xMidYMid meet"><path style="vector-effect: non-scaling-stroke; stroke: black; fill: steelblue; stroke-width: 0; " transform="scale(1,-1)" d="M 0 0 C -0.5 0.8 0.0 1.0 0 1 0.0 1.0 0.5 0.8 0 0 C 0.0 0.0 0.0 0.0 0 0  Z" /></svg><h2 id="2.-Creating-Flower"><a class="docs-heading-anchor" href="#2.-Creating-Flower">2. Creating Flower</a><a id="2.-Creating-Flower-1"></a><a class="docs-heading-anchor-permalink" href="#2.-Creating-Flower" title="Permalink"></a></h2><p>The next step is to use the Petal to create the Flower. This is done by passing the respective heights, widths and colors for each petal. The flower is then produced by rotating each petal accordingly.</p><pre><code class="language-julia hljs">struct Flower &lt;: Mark
    heights::Vector{Real}
    widths::Vector{Real}
    colors::Vector{String}
end

function ζ(flower::Flower)
    (;heights, widths, colors) = flower
    numberpetals = length(heights)
    angles = range(0,2π,numberpetals+1)[begin:end-1]
    reduce(+,map(x-&gt;R(-x[1])* Petal(x[2],x[3],x[4]),
            zip(angles,heights, widths, colors)))
end


Random.seed!(4)
npetals = 8
heights = rand(npetals);
widths = heights * 0.35
colors = map(x-&gt;&quot;#&quot;*hex(get(colourschemes[:rainbow], rand())),1:npetals)
flower = Flower(heights, widths,colors)

draw(flower)</code></pre><svg height="300" viewBox="-0.8359717146437419 -0.6616372732442771 1.2854639805928596 1.3067831484684749" width="294.9425870319905" preserveAspectRatio="xMidYMid meet"><path style="vector-effect: non-scaling-stroke; stroke: black; fill: #B4BD4C; stroke-width: 0; " transform="scale(1,-1)" d="M 0.0 0.0 C -0.2241960439909169 0.5124481005506673 0.0 0.640560125688334 0.0 0.640560125688334 0.0 0.640560125688334 0.2241960439909169 0.5124481005506673 0.0 0.0 C 0.0 0.0 0.0 0.0 0.0 0.0  Z" /><path style="vector-effect: non-scaling-stroke; stroke: black; fill: #E39C39; stroke-width: 0; " transform="scale(1,-1)" d="M 0.0 0.0 C 0.10323683288486526 0.26382746181687794 0.22941518418858947 0.2294151841885895 0.22941518418858947 0.2294151841885895 0.22941518418858947 0.2294151841885895 0.2638274618168779 0.1032368328848653 0.0 0.0 C 0.0 0.0 0.0 0.0 0.0 0.0  Z" /><path style="vector-effect: non-scaling-stroke; stroke: black; fill: #E69237; stroke-width: 0; " transform="scale(1,-1)" d="M 0.0 0.0 C 0.3427320947145397 0.14994529143761112 0.4284151183931746 2.623286017232678e-17 0.4284151183931746 2.623286017232678e-17 0.4284151183931746 2.623286017232678e-17 0.3427320947145397 -0.14994529143761107 0.0 0.0 C 0.0 0.0 0.0 0.0 0.0 0.0  Z" /><path style="vector-effect: non-scaling-stroke; stroke: black; fill: #E68033; stroke-width: 0; " transform="scale(1,-1)" d="M 0.0 -0.0 C 0.2878616261166119 -0.1126415058717177 0.25031445749270603 -0.250314457492706 0.25031445749270603 -0.250314457492706 0.25031445749270603 -0.250314457492706 0.11264150587171774 -0.28786162611661187 0.0 -0.0 C 0.0 -0.0 0.0 -0.0 0.0 -0.0  Z" /><path style="vector-effect: non-scaling-stroke; stroke: black; fill: #559FB0; stroke-width: 0; " transform="scale(1,-1)" d="M 0.0 -0.0 C 0.21842405468388915 -0.49925498213460373 7.642637697868893e-17 -0.6240687276682546 7.642637697868893e-17 -0.6240687276682546 7.642637697868893e-17 -0.6240687276682546 -0.21842405468388904 -0.49925498213460373 0.0 -0.0 C 0.0 -0.0 0.0 -0.0 0.0 -0.0  Z" /><path style="vector-effect: non-scaling-stroke; stroke: black; fill: #4334BE; stroke-width: 0; " transform="scale(1,-1)" d="M -0.0 0.0 C -0.1938909625941328 -0.4954991266294506 -0.43086880576473957 -0.4308688057647397 -0.43086880576473957 -0.4308688057647397 -0.43086880576473957 -0.4308688057647397 -0.49549912662945056 -0.19389096259413297 -0.0 0.0 C -0.0 0.0 -0.0 0.0 -0.0 0.0  Z" /><path style="vector-effect: non-scaling-stroke; stroke: black; fill: #81BA72; stroke-width: 0; " transform="scale(1,-1)" d="M -0.0 0.0 C -0.6519156536702391 -0.2852130984807296 -0.8148945670877987 -1.496937034839961e-16 -0.8148945670877987 -1.496937034839961e-16 -0.8148945670877987 -1.496937034839961e-16 -0.6519156536702391 0.2852130984807294 -0.0 0.0 C -0.0 0.0 -0.0 0.0 -0.0 0.0  Z" /><path style="vector-effect: non-scaling-stroke; stroke: black; fill: #9EBE5A; stroke-width: 0; " transform="scale(1,-1)" d="M 0.0 0.0 C -0.6978455226113833 0.273069987108802 -0.606822193575116 0.6068221935751158 -0.606822193575116 0.6068221935751158 -0.606822193575116 0.6068221935751158 -0.2730699871088023 0.6978455226113832 0.0 0.0 C 0.0 0.0 0.0 0.0 0.0 0.0  Z" /></svg><h2 id="3.-Creating-Stem"><a class="docs-heading-anchor" href="#3.-Creating-Stem">3. Creating Stem</a><a id="3.-Creating-Stem-1"></a><a class="docs-heading-anchor-permalink" href="#3.-Creating-Stem" title="Permalink"></a></h2><p>The Stem consisting in a vertical bar together with a text.</p><pre><code class="language-julia hljs">struct Stem &lt;: Mark
    height::Real
    text::String
end

function ζ(stem::Stem)
    (;height, text) = stem
    stem_bar = T(0,height) * T(0,-height)Bar(h=height,w=0.05)

    t = TextMark(text=text,angle=π/2,fontsize=7)
    textbox = U(1.2)rectboundingbox(t,S(:fill=&gt;:white)) + t
    textbox = U(0.05) * textbox
    textbox = amiddle(stem_bar,textbox)*textbox
    return stem_bar + textbox
end
stem_height = 5
stem_text = &quot;Text&quot;

stem = Stem(stem_height, stem_text)
draw(stem)</code></pre><svg height="300" viewBox="-0.27501302083333323 -5.083333333333333 0.5787369791666666 5.166666666666667" width="24.72421874999999" preserveAspectRatio="xMidYMid meet"><polygon points="-0.025 0.0 0.025 0.0 0.025 5.0 -0.025 5.0 " style="vector-effect: non-scaling-stroke; " transform="scale(1,-1)" /><polygon points="-0.19167968749999986 1.9665234375000002 0.22039062499999995 1.9665234375000002 0.2203906249999999 3.0334765624999998 -0.19167968749999992 3.0334765624999998 " style="vector-effect: non-scaling-stroke; fill: white; " transform="scale(1,-1)" /><text x="0.17500000000000002" style="font-family: Helvetica; text-anchor: middle; vector-effect: non-scaling-stroke; font-size: 0.34999999999999964pt; " transform="translate(0 -5.0) rotate(-90.0, 0.17500000000000002, 2.5)" y="2.5">Text</text></svg><h2 id="4.-Creating-Plant"><a class="docs-heading-anchor" href="#4.-Creating-Plant">4. Creating Plant</a><a id="4.-Creating-Plant-1"></a><a class="docs-heading-anchor-permalink" href="#4.-Creating-Plant" title="Permalink"></a></h2><p>With the Flower and Stem, we can create the <code>Plant</code> mark as shown in the OECD Better Life Index visualization.</p><pre><code class="language-julia hljs">struct Plant &lt;: Mark
    flower_heights::Vector{Real}
    flower_widths::Vector{Real}
    flower_colors::Vector{String}
    stem_height::Real
    stem_text::String
end
Plant(;flower_heights, flower_widths, flower_colors, stem_height, stem_text) = Plant(flower_heights, flower_widths, flower_colors, stem_height, stem_text)

function ζ(plant::Plant)
    (;flower_heights, flower_widths, flower_colors, stem_height, stem_text) = plant

    flower = Flower(flower_heights, flower_widths, flower_colors)
    stem = Stem(stem_height, stem_text)
    d = stem + T(0,stem_height) * flower
end

stem_height = 5
stem_text = &quot;Text&quot;
plant = Plant(heights, widths, colors, stem_height, stem_text)

draw(plant)</code></pre><svg height="300" viewBox="-0.9089039025159377 -5.7345694611164735 1.4313283563372512 5.828578796544612" width="66.12692664077835" preserveAspectRatio="xMidYMid meet"><polygon points="-0.025 0.0 0.025 0.0 0.025 5.0 -0.025 5.0 " style="vector-effect: non-scaling-stroke; " transform="scale(1,-1)" /><polygon points="-0.19167968749999986 1.9665234375000002 0.22039062499999995 1.9665234375000002 0.2203906249999999 3.0334765624999998 -0.19167968749999992 3.0334765624999998 " style="vector-effect: non-scaling-stroke; fill: white; " transform="scale(1,-1)" /><text x="0.17500000000000002" style="font-family: Helvetica; text-anchor: middle; vector-effect: non-scaling-stroke; font-size: 0.34999999999999964pt; " transform="translate(0 -5.0) rotate(-90.0, 0.17500000000000002, 2.5)" y="2.5">Text</text><path style="vector-effect: non-scaling-stroke; stroke: black; fill: #B4BD4C; stroke-width: 0; " transform="scale(1,-1)" d="M 0.0 5.0 C -0.2241960439909169 5.512448100550667 0.0 5.640560125688334 0.0 5.640560125688334 0.0 5.640560125688334 0.2241960439909169 5.512448100550667 0.0 5.0 C 0.0 5.0 0.0 5.0 0.0 5.0  Z" /><path style="vector-effect: non-scaling-stroke; stroke: black; fill: #E39C39; stroke-width: 0; " transform="scale(1,-1)" d="M 0.0 5.0 C 0.10323683288486526 5.263827461816878 0.22941518418858947 5.229415184188589 0.22941518418858947 5.229415184188589 0.22941518418858947 5.229415184188589 0.2638274618168779 5.103236832884865 0.0 5.0 C 0.0 5.0 0.0 5.0 0.0 5.0  Z" /><path style="vector-effect: non-scaling-stroke; stroke: black; fill: #E69237; stroke-width: 0; " transform="scale(1,-1)" d="M 0.0 5.0 C 0.3427320947145397 5.149945291437611 0.4284151183931746 5.0 0.4284151183931746 5.0 0.4284151183931746 5.0 0.3427320947145397 4.850054708562389 0.0 5.0 C 0.0 5.0 0.0 5.0 0.0 5.0  Z" /><path style="vector-effect: non-scaling-stroke; stroke: black; fill: #E68033; stroke-width: 0; " transform="scale(1,-1)" d="M 0.0 5.0 C 0.2878616261166119 4.887358494128282 0.25031445749270603 4.749685542507294 0.25031445749270603 4.749685542507294 0.25031445749270603 4.749685542507294 0.11264150587171774 4.712138373883388 0.0 5.0 C 0.0 5.0 0.0 5.0 0.0 5.0  Z" /><path style="vector-effect: non-scaling-stroke; stroke: black; fill: #559FB0; stroke-width: 0; " transform="scale(1,-1)" d="M 0.0 5.0 C 0.21842405468388915 4.5007450178653965 7.642637697868893e-17 4.375931272331745 7.642637697868893e-17 4.375931272331745 7.642637697868893e-17 4.375931272331745 -0.21842405468388904 4.5007450178653965 0.0 5.0 C 0.0 5.0 0.0 5.0 0.0 5.0  Z" /><path style="vector-effect: non-scaling-stroke; stroke: black; fill: #4334BE; stroke-width: 0; " transform="scale(1,-1)" d="M 0.0 5.0 C -0.1938909625941328 4.504500873370549 -0.43086880576473957 4.56913119423526 -0.43086880576473957 4.56913119423526 -0.43086880576473957 4.56913119423526 -0.49549912662945056 4.806109037405867 0.0 5.0 C 0.0 5.0 0.0 5.0 0.0 5.0  Z" /><path style="vector-effect: non-scaling-stroke; stroke: black; fill: #81BA72; stroke-width: 0; " transform="scale(1,-1)" d="M 0.0 5.0 C -0.6519156536702391 4.71478690151927 -0.8148945670877987 5.0 -0.8148945670877987 5.0 -0.8148945670877987 5.0 -0.6519156536702391 5.285213098480729 0.0 5.0 C 0.0 5.0 0.0 5.0 0.0 5.0  Z" /><path style="vector-effect: non-scaling-stroke; stroke: black; fill: #9EBE5A; stroke-width: 0; " transform="scale(1,-1)" d="M 0.0 5.0 C -0.6978455226113833 5.273069987108802 -0.606822193575116 5.606822193575116 -0.606822193575116 5.606822193575116 -0.606822193575116 5.606822193575116 -0.2730699871088023 5.6978455226113836 0.0 5.0 C 0.0 5.0 0.0 5.0 0.0 5.0  Z" /></svg><h2 id="5.-Making-the-Plot"><a class="docs-heading-anchor" href="#5.-Making-the-Plot">5. Making the Plot</a><a id="5.-Making-the-Plot-1"></a><a class="docs-heading-anchor-permalink" href="#5.-Making-the-Plot" title="Permalink"></a></h2><p>We use the OECD Better Life Index found at <a href="https://stats.oecd.org/Index.aspx?DataSetCode=BLI">https://stats.oecd.org/Index.aspx?DataSetCode=BLI</a>.</p><p>First, let us fix the dataset. We are using the OECD Better Life Index, the one used by Moritz. The original dataset is not in the proper format for the visualization. We need to do some transformations in order to get something more similar to the data used by Moritz.</p><p>Thus, we do some data normalization in order to compute the indexes for each topic. We do not claim that index values we compute are the actual correct indexes. But this does not matter to us, as our goal is just to replicate the visualization, not the dataset.</p><pre><code class="language-julia hljs">path = joinpath(pkgdir(Vizagrams), &quot;docs&quot;, &quot;src&quot;, &quot;assets&quot;, &quot;oecd.csv&quot;)
df = DataFrame(CSV.File(path));
df[!,:BLI_Index] = map(x-&gt;split(x,&quot;_&quot;)[1], df.INDICATOR)

df = leftjoin(df,combine(groupby(df, :Indicator), :Value =&gt; maximum, :Value=&gt; minimum), on=:Indicator)
df[!,:Norm_Value] = map(row-&gt;(row[:Value] - row[:Value_minimum])/(row[:Value_maximum] - row[:Value_minimum]),eachrow(df))
df = combine(groupby(df,[:Country,:BLI_Index]),:Norm_Value=&gt;mean)
df = rename(df,:BLI_Index =&gt; :Topic, :Norm_Value_mean =&gt; :Value)
df = leftjoin(df,combine(groupby(df,:Country),:Value=&gt;sum),on=:Country)
df = filter(row-&gt;row[:Country]!=&quot;OECD - Total&quot;,df)
df[!,:Country] = map(x-&gt;x == &quot;Korea&quot; ? &quot;South Korea&quot; : x ,df.Country)
df[!,:Country] = map(x-&gt;x == &quot;Türkiye&quot; ? &quot;Turkey&quot; : x ,df.Country)
df[!,:Country] = map(x-&gt;x == &quot;Slovak Republic&quot; ? &quot;Slovakia&quot; : x ,df.Country);</code></pre><h3 id="5.1-Scatter-Plot"><a class="docs-heading-anchor" href="#5.1-Scatter-Plot">5.1 Scatter Plot</a><a id="5.1-Scatter-Plot-1"></a><a class="docs-heading-anchor-permalink" href="#5.1-Scatter-Plot" title="Permalink"></a></h3><p>We start with a simple scatter plot.</p><pre><code class="language-julia hljs">scatter_plt = Plot(
    title=&quot;Scatter Plot&quot;,
    figsize=(1000,200),
    data=df,
    config=(
        xaxis=(title=&quot;Countries&quot;, ticktextangle=π/2),
        yaxis=(title=&quot;Value in Topics&quot;,),
        ),
    encodings=(
        x = (field = :Country, datatype = :n),
        y = (field = :Value, datatype = :q),
        color = (field = :Topic, datatype=:n,scale_domain=unique(df.Topic),scale_range=rainbow_12),
    ),
    graphic = ∑(row-&gt;begin
            T(row[:x],row[:y])*S(:fill=&gt;row[:color],:opacity=&gt;0.8)*Circle(r=3)
        end)
);

draw(scatter_plt, width=800)</code></pre><img src="e2049cec.svg" alt="Example block output"/><h3 id="5.2-Flower-Plot"><a class="docs-heading-anchor" href="#5.2-Flower-Plot">5.2 Flower Plot</a><a id="5.2-Flower-Plot-1"></a><a class="docs-heading-anchor-permalink" href="#5.2-Flower-Plot" title="Permalink"></a></h3><p>Next, we use the Flower mark as a nested plot that aggregates the values in the same country.</p><pre><code class="language-julia hljs">flowerplt = Plot(
    title=&quot;MyPlot&quot;,
    figsize=(1000,200),
    data=df,
    config=(
        xaxis=(title=&quot;Countries&quot;, ticktextangle=π/2),
        yaxis=(title=&quot;Value in Topics&quot;,),
        ),
    encodings=(
        x = (field = :Country, datatype = :n),
        y = (field = :Value_sum, datatype = :q),
        color = (field = :Topic, datatype=:n,scale_domain=unique(df.Topic),scale_range=rainbow_12),
        h = (field=:Value, datatype=:q, scale=IdScale()),
    ),
    graphic= ∑(i=:x,orderby=:x, row-&gt; begin
                T(first(row.:x),first(row.:y))U(20)Flower(row.h, 0.30*row.h,row.color)
            end
            )
);

draw(flowerplt,width=800)</code></pre><img src="4de339af.svg" alt="Example block output"/><h3 id="5.3-Plant-Plot"><a class="docs-heading-anchor" href="#5.3-Plant-Plot">5.3 Plant Plot</a><a id="5.3-Plant-Plot-1"></a><a class="docs-heading-anchor-permalink" href="#5.3-Plant-Plot" title="Permalink"></a></h3><p>We finish with the OECD Better Index Plot using our Plant mark.</p><pre><code class="language-julia hljs">plt = Plot(
        figsize=(1000,200),
        data=df,
        config=(
            frame=NilD(),
            grid=NilD(),
            xaxis=(ticktexts=&quot;&quot;,tickmark=NilD()),
            yaxis=(axisarrow=NilD(),title=&quot;&quot;),
            ),
        encodings=(
            x = (field = :Country, datatype = :n),
            y = (field = :Value_sum, datatype = :q, scale_domain=(0,8)),
            color = (field = :Topic, datatype=:n,scale_domain=unique(df.Topic),scale_range=rainbow_12),
            h = (field=:Value, datatype=:q, scale=IdScale(),),
            text=(field=:Country,datatype=:n, scale=IdScale()),
        ),
        graphic = ∑(i=:x, rows-&gt; begin
                    T(rows.:x[1],0) * U(20)*
                    Plant(
                        flower_heights=rows.h,
                        flower_widths =0.30rows.h,
                        flower_colors=rows.color,
                        stem_height=rows.y[1]/20,
                        stem_text=rows.text[1]
                    )
            end)
    )
draw(plt,width=800)</code></pre><img src="37b16325.svg" alt="Example block output"/></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../minard/">« Minard&#39;s Chart</a><a class="docs-footer-nextpage" href="../pca/">PCA »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.7.0 on <span class="colophon-date" title="Monday 30 September 2024 14:30">Monday 30 September 2024</span>. Using Julia version 1.10.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
